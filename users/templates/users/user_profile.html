{% extends 'base.html' %}
{% load static %}

{% block extra_js %}
  <script src="{% static 'users/js/like_toggle.js' %}"></script>
{% endblock %}

{% block title %}
  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
{% endblock %}

{% block extra_css %}
  <style>
    .profile-item {
      display: flex;
      margin-bottom: 10px;
    }
    .profile-label {
      display: inline-block;
      width: 190px;
      font-weight: bold;
    }
    .profile-value {
      flex: 1;
    }
    .btn {
      width: 160px;
      display: inline-block;
      padding: 6px 10px;
      background-color: greenyellow;
      color: green;
      text-decoration: none;
      border-radius: 4px;
      text-align: center;
    }
    .btn-like {
      width: 160px;
      display: inline-block;
      padding: 6px 10px;
      background-color: #ffe0e0;
      color: #d00;
      text-decoration: none;
      border-radius: 4px;
      text-align: center;
    }
    .btn-like:hover {
      background-color: #ffd2d2;
    }
  </style>
{% endblock %}

{% block content %}
  <div class="container" style="max-width: 700px; margin: 0 auto; padding: 2rem;">
    {% if request.GET.from == 'search' %}
      <a href="{% url 'user_search' %}">â† æ¤œç´¢çµæœä¸€è¦§ã«æˆ»ã‚‹</a>
    {% elif request.GET.from == 'match' %}
      <a href="{% url 'match_list' %}">â† ãƒãƒƒãƒä¸€è¦§ã«æˆ»ã‚‹</a>
    {% elif request.GET.from == 'recommend' %}
      <a href="{% url 'recommended_users' %}">â† ãŠã™ã™ã‚ä¸€è¦§ã«æˆ»ã‚‹</a>
    {% else %}
      <a href="{% url 'mypage' %}">â† ãƒã‚¤ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a> {# ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ #}
    {% endif %}
    <h2>{{ target_user.username }} ã•ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>

    <div style="text-align: center; margin-bottom: 20px;">
      {% if profile.profile_image %}
        <img src="{{ profile.profile_image.url }}" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ" width="120" height="120" style="border-radius: 50%; object-fit: cover;" />
      {% else %}
        <div style="width: 120px; height: 120px; background: #eee; border-radius: 50%; display: inline-block;"></div>
      {% endif %}
    </div>

    <div style="border: 1px solid #ccc; border-radius: 8px; padding: 20px; background: #fafafa;">
      <div class="profile-item">
        <span class="profile-label">æ€§åˆ¥ï¼š</span>
        <span class="profile-value">{{ profile.get_gender_display|default:'æœªç™»éŒ²' }}</span>
      </div>

      <div class="profile-item">
        <span class="profile-label">åˆãƒˆãƒ¬å¸Œæœ›åœ°åŸŸï¼š</span>
        <span class="profile-value">{{ profile.get_training_area_display|default:'æœªç™»éŒ²' }}</span>
      </div>

      <div class="profile-item">
        <span class="profile-label">åˆãƒˆãƒ¬å¸Œæœ›åœ°åŸŸï¼ˆè©³ç´°ï¼‰ï¼š</span>
        <span class="profile-value">{{ profile.training_area_detail|default:'æœªç™»éŒ²' }}</span>
      </div>

      <div class="profile-item">
        <span class="profile-label">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç›®æ¨™ï¼š</span>
        <span class="profile-value">{{ profile.get_training_goal_display|default:'æœªç™»éŒ²' }}</span>
      </div>

      <div class="profile-item">
        <span class="profile-label">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°çµŒé¨“ï¼š</span>
        <span class="profile-value">{{ profile.get_training_experience_display|default:'æœªç™»éŒ²' }}</span>
      </div>

      <div class="profile-item">
        <span class="profile-label">è‡ªå·±ç´¹ä»‹ï¼š</span>
        <span class="profile-value">{{ profile.introduction|linebreaksbr }}</span>
      </div>
    </div>

    <div style="margin-top: 20px; text-align: center;">
      <a href="#"
        class="btn-like"
        data-user-id="{{ profile.user.id }}"
        title="{% if liked %}
          
          ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã™

        {% else %}
               
          ã„ã„ã­ã™ã‚‹

        {% endif %}">
        {% if liked %}
          ğŸ’” ã„ã„ã­ã‚’å–ã‚Šæ¶ˆã™
        {% else %}
          â¤ï¸ ã„ã„ã­ã™ã‚‹
        {% endif %}
      </a>
      {% if room_id %}
        <a href="{% url 'chatroom_detail' room_id %}" class="btn">ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã¸</a>
      {% endif %}
    </div>
  </div>
{% endblock %}
